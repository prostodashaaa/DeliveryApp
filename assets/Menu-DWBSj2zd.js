import{j as e,c as s,u as j,a as f,L as v,b as N,r as o,T as k,d as w,e as y,P as b,A as S}from"./index-D53scAOx.js";const A="_menu__header_1bmgf_1",E="_menu__products_1bmgf_15",L="_error_1bmgf_49",_={menu__header:A,menu__products:E,"not-items":"_not-items_1bmgf_35",error:L},C="_search_1y771_1",D="_input_1y771_35",m={search:C,input:D};function P({...r}){return e.jsxs("div",{className:s(m.search),children:[e.jsx("img",{src:"/DeliveryApp/Search.svg",alt:"Поиск"}),e.jsx("input",{className:s(m.input),type:"text",placeholder:"Введите блюдо или состав",...r})]})}const $="_ruble_1kx6w_99",F="_description__title_1kx6w_219",M="_description__composition_1kx6w_231",c={"link-product-card":"_link-product-card_1kx6w_1","product-card":"_product-card_1kx6w_11","product-card__image":"_product-card__image_1kx6w_37","product-card__price":"_product-card__price_1kx6w_67",ruble:$,"add-cart":"_add-cart_1kx6w_109","product-card__rating":"_product-card__rating_1kx6w_159","product-card__description":"_product-card__description_1kx6w_199",description__title:F,description__composition:M};function R(r){const t=j(),i=f(a=>a.user.profile),n=a=>{a.preventDefault(),i&&t(N.add({id:r.id,email:i.email}))};return e.jsx(v,{to:`/product/${r.id}`,className:s(c["link-product-card"]),children:e.jsxs("div",{className:s(c["product-card"]),children:[e.jsx("div",{className:s(c["product-card__image"]),children:e.jsx("img",{src:r.image,alt:"Фото блюда"})}),e.jsxs("div",{className:s(c["product-card__price"]),children:[r.price,e.jsx("span",{className:s(c.ruble),children:"₽"})]}),e.jsxs("div",{className:s(c["product-card__rating"]),children:[r.rating,e.jsx("img",{src:"/DeliveryApp/Rating.svg",alt:"Оценка"})]}),e.jsx("button",{className:s(c["add-cart"]),onClick:n,children:e.jsx("img",{src:"/DeliveryApp/CartButton.svg",alt:"Добавить в корзину"})}),e.jsxs("div",{className:s(c["product-card__description"]),children:[e.jsx("h2",{className:s(c.description__title),children:r.name}),e.jsx("p",{className:s(c.description__composition),children:r.ingredients})]})]})})}function I({products:r}){return r.map(t=>e.jsx(R,{id:t.id,name:t.name,ingredients:t.ingredients.join(", "),image:t.image,price:t.price,rating:t.rating},t.id))}function B(){const[r,t]=o.useState([]),[i,n]=o.useState(!1),[a,p]=o.useState(),[l,x]=o.useState(),g=async u=>{try{n(!0);const{data:d}=await y.get(`${b}/products`,{params:{name:u}});t(d),n(!1)}catch(d){console.error(d),d instanceof S&&p(d.message),n(!1);return}},h=u=>{x(u.target.value),console.log(l)};return o.useEffect(()=>{g(l)},[l]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:s(_.menu__header),children:[e.jsx(k,{children:"Меню"}),e.jsx(P,{onChange:h})]}),a&&e.jsx("div",{className:s(_.error),children:a}),!i&&r.length>0&&e.jsx(e.Fragment,{children:e.jsx("div",{className:s(_.menu__products),children:e.jsx(I,{products:r})})}),i&&e.jsx(w,{}),!i&&!a&&r.length==0&&e.jsx("div",{className:s(_["not-items"]),children:"Ничего не нашлось"})]})}export{B as Menu,B as default};
